{"version":3,"sources":["components/Matrix.js","components/Solver.js","App.js","serviceWorker.js","index.js"],"names":["Matrix","rows","cols","this","parseInt","size","values","Array","fill","console","log","JSON","stringify","i","j","iA","k","mat_right","output","new_values","temp","require","module","exports","lhs","b","plu","luDecompositionPivot","upper_tri","lower_tri","permutation","transpose","p_inv_b","matMatMult","y_values","forwardSubstitution","backSubstitution","A","max_val","max_index","z","candidate","Math","abs","swapRows","s","kmax","solution","Solver","Cell","props","style","solved","failed","background","className","id","value","onChange","e","target","App","useState","dim","setDim","setSolved","matrix","setMatrix","setSolution","setFailed","rhs","setRHS","updateMatrix","slice","new_matrix","updateRHS","index","replace","href","type","min","max","event","isNaN","updateDim","onClick","new_solution","solveLU","length","toString","includes","new_rhs","apply","map","x","col","y","key","a","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.88d872fe.chunk.js","sourcesContent":["class Matrix {\n  constructor(rows, cols) {\n    this.rows = parseInt(rows);\n    this.cols = parseInt(cols);\n    this.size = rows * cols;\n    this.values = new Array(this.size).fill(0);\n  }\n\n  printValues() {\n    console.log(JSON.stringify(this.values));\n  }\n\n  swapRows(i, j) {\n    // no swap required\n    if (i == j) {\n      return;\n    }\n\n    // create copy of the first row (both A and b)\n    let iA = new Array(this.cols).fill(0);\n\n    for (let k = 0; k < this.cols; k++) {\n      iA[k] = this.values[i * this.cols + k];\n    }\n\n    // swap the rows\n    for (let k = 0; k < this.cols; k++) {\n      //copy row j of A into row i of A\n      this.values[i * this.cols + k] = this.values[j * this.cols + k];\n\n      // copy row 1 into row 2\n      this.values[j * this.cols + k] = iA[k];\n    }\n  }\n\n  // assumes user has already created mat_right and output matrices\n  matMatMult(mat_right) {\n    // check dimensions make sense return without doing any multiplication\n    if (this.cols !== mat_right.rows) {\n      throw \"input dimensions don't match\";\n    }\n\n    // create an output matrix that will hold our values\n    let output = new Matrix(this.rows, mat_right.cols);\n\n    /*======================================\n     *  matrix multiplication is O(n^3).\n     *  Although this loop ordering takes advantage of caching, it\n     *  does not take advantage of BLAS routines (for row by row access).\n     *======================================*/\n    for (let i = 0; i < this.rows; i++) {\n      for (let k = 0; k < this.cols; k++) {\n        for (let j = 0; j < mat_right.cols; j++) {\n          output.values[i * output.cols + j] +=\n            this.values[i * this.cols + k] *\n            mat_right.values[k * mat_right.cols + j];\n        }\n      }\n    }\n\n    return output;\n  }\n\n  transpose() {\n    // create a new values array to hold the data\n    let new_values = new Array(this.size).fill(0);\n\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.cols; j++) {\n        new_values[i * this.cols + j] = this.values[j * this.cols + i];\n      }\n    }\n\n    let temp = this.rows;\n    this.rows = this.cols;\n    this.cols = temp;\n    this.values = new_values;\n  }\n}\n\nexport default Matrix;\n","const Matrix = require(\"./Matrix\");\n\nmodule.exports = class Solver {\n  solveLU(lhs, b) {\n    // construct LU decomposition of the lhs matrix - lhs gives us the permutation\n    let plu = this.luDecompositionPivot(lhs);\n\n    // create space to hold the upper triangular, lower triangular and permutation\n    let upper_tri = plu[2];\n    let lower_tri = plu[1];\n    let permutation = plu[0];\n\n    // transpose the permutation matrix\n    permutation.transpose();\n\n    // multiply the transpose of the permutation matrix by b\n    let p_inv_b = permutation.matMatMult(b);\n\n    // calculate the y values using forward substitution\n    let y_values = this.forwardSubstitution(lower_tri, p_inv_b); // memory cleared\n\n    // calculate the solution using back substitution and the y values we calculated earlier\n    let solution = this.backSubstitution(upper_tri, y_values); // return at end of function\n\n    return solution;\n  }\n\n  luDecompositionPivot(lhs) {\n    // make sure the matrix is square\n    if (lhs.cols !== lhs.rows) {\n      throw \"Input matrix must be square!\";\n    }\n\n    // make a copy of the lhs matrix\n    let A = new Matrix(lhs.rows, lhs.cols);\n    for (let i = 0; i < lhs.size; i++) {\n      A.values[i] = lhs.values[i];\n    }\n\n    let lower_tri = new Matrix(lhs.rows, lhs.cols);\n\n    let permutation = new Matrix(lhs.rows, lhs.cols);\n    for (let i = 0; i < permutation.rows; i++) {\n      permutation.values[i * permutation.cols + i] = 1;\n    }\n\n    let max_val;\n    let max_index;\n\n    for (let k = 0; k < A.rows - 1; k++) {\n      max_val = -1;\n      max_index = k;\n\n      for (let z = k; z < A.rows; z++) {\n        let candidate = Math.abs(A.values[z * A.cols + k]);\n        if (candidate > max_val) {\n          max_val = candidate;\n          max_index = z;\n        }\n      }\n\n      A.swapRows(k, max_index);\n      permutation.swapRows(k, max_index);\n      lower_tri.swapRows(k, max_index);\n\n      let s;\n\n      // loop over each equation below the pivot\n      for (let i = k + 1; i < A.rows; i++) {\n        // assumes row major order\n        s = A.values[i * A.cols + k] / A.values[k * A.cols + k];\n\n        // update the upper tri values using the scaling factor\n        for (let j = k; j < A.cols; j++) {\n          A.values[i * A.cols + j] -= s * A.values[k * A.cols + j];\n        }\n\n        // update the lower tri values\n        lower_tri.values[i * lower_tri.rows + k] = s;\n      }\n    }\n\n    // add 1s to the diagonal\n    for (let i = 0; i < A.rows; i++) {\n      lower_tri.values[i * lower_tri.rows + i] += 1;\n    }\n\n    permutation.transpose();\n\n    // transpose the permutation matrix\n    return [permutation, lower_tri, A];\n  }\n\n  upperTriangular(lhs, b) {\n    // check if A is square\n    if (lhs.rows !== lhs.cols) {\n      throw \"Input matrix must be square!\";\n    }\n\n    // check that the dimensions of A and b are compatible\n    if (lhs.rows !== b.size) {\n      throw \"The dimensions of A and b don't match!\";\n    }\n\n    // s is the scaling factor to adjust a row. kmax keeeps track of the index of the maximum value; need for pivoting\n    let s;\n    let kmax;\n\n    // loop over each pivot row except the last one\n    for (let k = 0; k < lhs.rows - 1; k++) {\n      // initialize with current pivot row\n      kmax = k;\n\n      // find pivot column to avoid zeros on diagonal\n      for (let i = k + 1; i < lhs.rows; i++) {\n        if (\n          Math.abs(lhs.values[kmax * lhs.cols + k]) <\n          Math.abs(lhs.values[i * lhs.cols + k])\n        ) {\n          kmax = i;\n        }\n      }\n\n      // swap the rows if we have found a bigger value in the column below the pivot\n      lhs.swapRows(kmax, k);\n      b.swapRows(kmax, k);\n\n      // loop over each row below the pivot\n      for (let i = k + 1; i < lhs.rows; i++) {\n        // calculate scaling value for lhs row\n        s = lhs.values[i * lhs.cols + k] / lhs.values[k * lhs.cols + k];\n\n        // start looping from k and update the row\n        for (let j = k; j < lhs.rows; j++) {\n          lhs.values[i * lhs.cols + j] -= s * lhs.values[k * lhs.cols + j];\n        }\n\n        // update corresponding entry of b\n        b.values[i] -= s * b.values[k];\n      }\n    }\n  }\n\n  backSubstitution(lhs, b) {\n    // check if A is square\n    if (lhs.rows !== lhs.cols) {\n      throw \"Input matrix must be square!\";\n    }\n\n    // check that the dimensions of A and b are compatible\n    if (lhs.rows !== b.size) {\n      throw \"The dimensions of A and b don't match!\";\n    }\n\n    // create an empty vector\n    let solution = new Matrix(b.rows, b.cols); // return at end of function\n\n    // scaling factor\n    let s;\n\n    // iterate over system backwards\n    for (let k = b.size - 1; k >= 0; k--) {\n      // scaling factor\n      s = 0;\n\n      for (let j = k + 1; j < b.size; j++) {\n        // assumes row major order\n        s += lhs.values[k * lhs.cols + j] * solution.values[j];\n      }\n\n      // adjust the values in the solution vector\n      solution.values[k] = (b.values[k] - s) / lhs.values[k * lhs.cols + k];\n    }\n\n    // console.log(\"back sub\", solution);\n    return solution;\n  }\n\n  forwardSubstitution(lhs, b) {\n    // console.log(\"lhs\", lhs.values, \"b\", b.values);\n    // check if A is square\n    if (lhs.rows !== lhs.cols) {\n      throw \"Input matrix must be square!\";\n    }\n\n    // check that the dimensions of A and b are compatible\n    if (lhs.rows !== b.size) {\n      throw \"The dimensions of A and b don't match!\";\n    }\n\n    // create an empty vector\n    let solution = new Matrix(b.rows, b.cols);\n\n    // scaling factor\n    let s;\n\n    // iterate over system\n    for (let k = 0; k < b.size; k++) {\n      s = 0;\n\n      for (let j = 0; j < k; j++) {\n        // assumes row major order\n        s = s + lhs.values[k * lhs.cols + j] * solution.values[j];\n      }\n\n      // adjust the values in the solution vector\n      solution.values[k] = (b.values[k] - s) / lhs.values[k * lhs.cols + k];\n    }\n\n    // console.log(\"forward sub\", solution);\n\n    return solution;\n  }\n};\n","import React, { useState } from \"react\";\nimport \"./App.css\";\nimport Matrix from \"./components/Matrix\";\nconst Solver = require(\"./components/Solver\");\n\nfunction Cell(props) {\n  let style = {};\n\n  if (props.solved) {\n    if (props.failed) {\n      style = { background: \"red\" };\n    } else {\n      style = { background: \"#8FBC8F\" };\n    }\n  }\n\n  return (\n    <input\n      style={style}\n      className=\"cell\"\n      id={props.id}\n      value={props.value}\n      onChange={(e) => props.onChange(props.id, e.target.value)}\n    ></input>\n  );\n}\n\nfunction App() {\n  let [dim, setDim] = useState(2);\n  let [solved, setSolved] = useState(false);\n  let [matrix, setMatrix] = useState(new Matrix(dim, dim));\n  let [solution, setSolution] = useState(new Matrix(dim, 1));\n  let [failed, setFailed] = useState(false);\n  let [rhs, setRHS] = useState(new Matrix(dim, 1));\n\n  function updateMatrix(i, value) {\n    let new_values = matrix.values.slice();\n    let new_matrix = new Matrix(matrix.rows, matrix.cols);\n    new_values[i] = value;\n    new_matrix.values = new_values;\n    setMatrix(new_matrix);\n  }\n\n  function updateRHS(i, value) {\n    let index = i.replace(/\\D/g, \"\");\n    let new_values = rhs.values.slice();\n    let new_matrix = new Matrix(matrix.rows, 1);\n    new_values[index] = value;\n    new_matrix.values = new_values;\n    setRHS(new_matrix);\n  }\n\n  function updateDim(value) {\n    let dim = isNaN(parseInt(value)) ? 2 : parseInt(value);\n    if (dim > 10) {\n      dim = 10;\n    } else if (dim < 2) {\n      dim = 2;\n    }\n    setMatrix(new Matrix(dim, dim));\n    setRHS(new Matrix(dim, 1));\n    setDim(dim);\n  }\n\n  function solve() {\n    let solver = new Solver();\n    let new_solution = solver.solveLU(matrix, rhs);\n\n    for (let i = 0; i < new_solution.values.length; i++) {\n      if (isNaN(new_solution.values[i])) {\n        new_solution.values[i] = new_solution.values[i].toString();\n      }\n    }\n\n    if (new_solution.values.includes(\"NaN\")) {\n      setFailed(true);\n    } else {\n      setFailed(false);\n    }\n\n    setSolved(true);\n    setSolution(new_solution);\n  }\n\n  function reset() {\n    let new_dim = 2;\n    let new_solved = false;\n    let new_matrix = new Matrix(dim, dim);\n    let new_solution = new Matrix(dim, 1);\n    let new_failed = false;\n    let new_rhs = new Matrix(dim, 1);\n\n    setDim(new_dim);\n    setSolved(new_solved);\n    setMatrix(new_matrix);\n    setSolution(new_solution);\n    setFailed(new_failed);\n    setRHS(new_rhs);\n  }\n\n  return (\n    <div className=\"App\">\n      <nav>\n        <a href=\"https://fazalkhan.net/\"> back to Fazi's Homepage</a>\n      </nav>\n      <div className=\"title\">Matrix Solver</div>\n      <div className=\"description\">\n        <p>\n          This is a matrix solver written in Javascript using React. It directly\n          solves a system of equations of the form\n          <span className=\"bold\"> Ax = b</span> using an LU decomposition with\n          partial pivoting. <br></br>\n          <br></br>\n          1. Input the values in the matrix on the left. <br></br> <br></br>\n          2. Input the right-hand side. <br></br> <br></br>\n          3. Hit solve. <br></br> <br></br>\n          If a solution exists, the variable column will show the solution\n          values and turn green from grey. <br></br> <br></br>\n          If a solution does not exist, the variable column will turn red from\n          grey.\n        </p>\n      </div>\n\n      <div className=\"inputs\">\n        <span className=\"dimensions\">#Rows:</span>\n        <input\n          className=\"slider\"\n          type=\"number\"\n          min=\"2\"\n          max=\"10\"\n          value={dim}\n          onChange={(event) => updateDim(event.target.value)}\n        ></input>\n\n        <button className=\"solve-button\" onClick={solve}>\n          Solve\n        </button>\n        <button className=\"reset-button\" onClick={reset}>\n          Reset\n        </button>\n      </div>\n\n      <div className=\"content\">\n        <div className=\"grid\">\n          <div className=\"matrix\">\n            <div>\n              {Array.apply(null, Array(dim)).map(function (x, i) {\n                const col = Array.apply(null, Array(dim)).map(function (y, j) {\n                  return (\n                    <Cell\n                      key={i * dim + j}\n                      id={i * dim + j}\n                      value={matrix.values[i * dim + j]}\n                      onChange={updateMatrix}\n                    />\n                  );\n                });\n                return <div key={i}>{col}</div>;\n              })}\n            </div>\n          </div>\n          <div className=\"variables\">\n            {Array.apply(null, Array(dim)).map(function (x, i) {\n              return (\n                <Cell\n                  failed={failed}\n                  solved={solved}\n                  key={\"x\" + i}\n                  id={\"x\" + i}\n                  value={solved ? solution.values[i] : \"x\" + i}\n                  onChange={(a, b) => {}}\n                />\n              );\n            })}\n          </div>\n          <div className=\"equalsign\"> = </div>\n          <div className=\"rhs\">\n            {Array.apply(null, Array(dim)).map(function (x, i) {\n              return (\n                <Cell\n                  key={\"rhs\" + i}\n                  id={\"rhs\" + i}\n                  value={rhs.values[i]}\n                  onChange={updateRHS}\n                />\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}